generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admins {
  id                BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name              String
  email             String    @unique(map: "admins_email_unique")
  password          String?   @db.VarChar(255)
  role              AdminRole 
  full_access       Boolean   @default(false)
  is_active         Boolean   @default(true)
  email_verified_at DateTime? @db.Timestamp(0)
  remember_token    String?   @db.VarChar(100)

  verificationCodes auth_verification_codes[]

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
}


model auth_verification_codes {
  id          BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  admin_id   BigInt
  code_hash  String   @db.VarChar(255)
  purpose    AuthCodePurpose @default(ADMIN_LOGIN)
  expires_at DateTime
  used       Boolean  @default(false)

  admin      admins   @relation(fields: [admin_id], references: [id], onDelete: Cascade)

  created_at DateTime @default(now())

  @@index([admin_id])
}

enum AuthCodePurpose {
  ADMIN_LOGIN
  PASSWORD_RESET
  FIRST_TIME_SETUP
}


enum AdminRole {
  SUPER_ADMIN
  ADMIN
  VENUE_MANAGER
  LEAD_USER
  DATA_ENTRY_USER
}




model banquet_inquiries {
  id                 BigInt          @id @default(autoincrement()) @db.UnsignedBigInt
  name               String
  email              String?
  phone              String
  alternate_phone    String?
  preferred_location String?
  slot               String?
  menu               String?
  event_type         String?
  budget             String?
  no_guest           String?
  event_date         DateTime?       @db.Date
  source             String?
  url                String?
  listing_id         BigInt?         @db.UnsignedBigInt
  created_at         DateTime?       @db.Timestamp(0)
  updated_at         DateTime?       @db.Timestamp(0)
  manager_id         BigInt?         @db.UnsignedBigInt
  admin_id           BigInt?         @db.UnsignedBigInt
  lead_events        lead_events[]
  lead_rm_notes      lead_rm_notes[]
}

model banquet_reviews {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  rating     Int
  review     String    @db.Text
  listing_id BigInt    @db.UnsignedBigInt
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model blogs {
  id                BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  title             String
  slug              String
  image             String?
  short_description String    @db.Text
  description       String    @db.Text
  admin_id          BigInt    @db.UnsignedBigInt
  created_at        DateTime? @db.Timestamp(0)
  updated_at        DateTime? @db.Timestamp(0)
  keywords          String
  meta_title        String
  paragraph_2       String    @db.Text
  image_2           String
  keyword_stack     String    @db.Text
  status            String
  indexing          String
}

model booking_venues {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model bookings {
  id               BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  booking_date     DateTime  @db.Date
  guest_name       String
  guest_number     String
  event_type       String
  pax              String
  event_date       DateTime  @db.Date
  venue_name       String
  total_gmv        Int
  er               String
  advance          Int
  per25_collected  String
  manager_id       BigInt    @db.UnsignedBigInt
  booking_venue_id BigInt    @db.UnsignedBigInt
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)
}

model cache {
  key        String @id
  value      String @db.MediumText
  expiration Int
}

model cache_locks {
  key        String @id
  owner      String
  expiration Int
}

model cities {
  id               BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name             String
  title            String
  description      String    @db.LongText
  keywords         String    @db.Text
  meta_description String    @db.Text
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)
}

model city {
  id        Int        @id @default(autoincrement())
  name      String     @unique(map: "City_name_key")
  createdAt DateTime   @default(now())
  location  location[]
}

model events {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  remark     String    @db.Text
  event_date DateTime  @db.Date
  task_id    BigInt    @db.UnsignedBigInt
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model failed_jobs {
  id         BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  uuid       String   @unique(map: "failed_jobs_uuid_unique")
  connection String   @db.Text
  queue      String   @db.Text
  payload    String   @db.LongText
  exception  String   @db.LongText
  failed_at  DateTime @default(now()) @db.Timestamp(0)
}

model food_categories {
  id       BigInt @id @default(autoincrement()) @db.UnsignedBigInt
  name     String
  icon     String?
  created_at DateTime?
  updated_at DateTime?

  listing_food_categories listing_food_categories[]
}


model food_category_item {
  id               BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  listing_id       BigInt    @db.UnsignedBigInt
  food_category_id BigInt    @db.UnsignedBigInt
  food_item_id     BigInt    @db.UnsignedBigInt
  quantity         Int?
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)
}

model food_items {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model hall_capacities {
  id                 BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  area               String
  capacity           Int
  floating           Int
  type               String
  day_availability   String
  night_availability String
  listing_id         BigInt    @db.UnsignedBigInt
  created_at         DateTime? @db.Timestamp(0)
  updated_at         DateTime? @db.Timestamp(0)
  listing            listings  @relation(fields: [listing_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_hall_capacities_listing")

  @@index([listing_id], map: "fk_hall_capacities_listing")
}

model ListingFaq {
  id        BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  question  String
  answer    String
  order     Int      @default(0)
  isActive  Boolean  @map("is_active")

  listingId BigInt   @map("listing_id") @db.UnsignedBigInt
  listing   listings @relation(fields: [listingId], references: [id], onDelete: Cascade)

  createdAt DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt DateTime? @map("updated_at") @db.Timestamp(0)

  @@map("listing_faqs")
  @@index([listingId])
}


model inquiries {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  email      String
  phone      String
  subject    String
  message    String    @db.Text
  source_url String
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model job_batches {
  id             String  @id
  name           String
  total_jobs     Int
  pending_jobs   Int
  failed_jobs    Int
  failed_job_ids String  @db.LongText
  options        String? @db.MediumText
  cancelled_at   Int?
  created_at     Int
  finished_at    Int?
}

model jobs {
  id           BigInt @id @default(autoincrement()) @db.UnsignedBigInt
  queue        String
  payload      String @db.LongText
  attempts     Int    @db.UnsignedTinyInt
  reserved_at  Int?   @db.UnsignedInt
  available_at Int    @db.UnsignedInt
  created_at   Int    @db.UnsignedInt

  @@index([queue], map: "jobs_queue_index")
}

model lead_events {
  id                 BigInt            @id @default(autoincrement()) @db.UnsignedBigInt
  banquet_inquiry_id BigInt            @db.UnsignedBigInt
  type               String
  description        String            @db.Text
  next_event_date    DateTime?         @db.Date
  created_by         BigInt?           @db.UnsignedBigInt
  created_at         DateTime?         @db.Timestamp(0)
  updated_at         DateTime?         @db.Timestamp(0)
  banquet_inquiries  banquet_inquiries @relation(fields: [banquet_inquiry_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "lead_admin_events_banquet_inquiry_id_foreign")

  @@index([banquet_inquiry_id], map: "lead_admin_events_banquet_inquiry_id_foreign")
}

model lead_rm_notes {
  id                 BigInt            @id @default(autoincrement()) @db.UnsignedBigInt
  banquet_inquiry_id BigInt            @db.UnsignedBigInt
  note               String            @db.Text
  created_by         BigInt?           @db.UnsignedBigInt
  created_at         DateTime?         @db.Timestamp(0)
  updated_at         DateTime?         @db.Timestamp(0)
  banquet_inquiries  banquet_inquiries @relation(fields: [banquet_inquiry_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "lead_rm_notes_banquet_inquiry_id_foreign")

  @@index([banquet_inquiry_id], map: "lead_rm_notes_banquet_inquiry_id_foreign")
}

model listing_categories {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  parent_id  BigInt?
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model listing_food_categories {
  id               BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  listing_id       BigInt    @db.UnsignedBigInt
  food_category_id BigInt    @db.UnsignedBigInt
  price            String?
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)

  listing       listings       @relation(fields: [listing_id], references: [id], onDelete: Cascade)
  food_category food_categories @relation(fields: [food_category_id], references: [id])

  @@index([listing_id])
  @@index([food_category_id])
}

model listing_listing_category {
  id                  BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  listing_id          BigInt    @db.UnsignedBigInt
  listing_category_id BigInt    @db.UnsignedBigInt
  created_at          DateTime? @db.Timestamp(0)
  updated_at          DateTime? @db.Timestamp(0)

  listing listings @relation(fields: [listing_id], references: [id], onDelete: Cascade)

  @@index([listing_id])
  @@index([listing_category_id])
}


model listings {
  id              BigInt            @id @default(autoincrement()) @db.UnsignedBigInt
  title           String
  slug            String
  excerpt         String            @db.Text
  description     String            @db.Text
  keywords        String            @db.Text
  budget          String?
  min_budget      BigInt
  max_budget      BigInt
  min_guest       BigInt
  max_guest       BigInt
  guests          String?
  features        String?           @db.Text
  policies        String?           @db.Text
  phone           String?
  email           String?
  address         String            @db.Text
  google_map_url  String?           @db.Text
  locality        String?
  pincode         BigInt
  city            String
  state           String
  country         String
  lat             Float?
  long            Float?
  recommended     Boolean?          @map("recommended")
  popular         Boolean?
  trending        Boolean?
  high_demand     Boolean?
  status          Boolean?
  created_at      DateTime?         @db.Timestamp(0)
  updated_at      DateTime?         @db.Timestamp(0)
  city_id         BigInt?           @db.UnsignedBigInt
  hall_capacities hall_capacities[]
  venue_images    venue_images[]
  listing_food_categories listing_food_categories[]
  faqs ListingFaq[]
  listing_categories listing_listing_category[]


  @@index([title], map: "Title_index")
  @@index([min_budget, max_budget], map: "idx_budget_range")
  @@index([city, locality], map: "idx_city_locality")
  @@index([min_guest, max_guest], map: "idx_guest_range")
  @@index([city], map: "idx_listing_city")
  @@index([created_at], map: "idx_listing_created_at")
  @@index([high_demand], map: "idx_listing_high_demand")
  @@index([locality], map: "idx_listing_locality")
  @@index([recommended], map: "idx_listing_recomended")
}

model localities {
  id               BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  name             String
  title            String
  heading          String?
  description      String   @db.LongText
  meta_description String   @db.Text
  keywords         String   @db.Text
  location_id      BigInt?  @db.UnsignedBigInt
  city_id          BigInt   @db.UnsignedBigInt
  created_at       DateTime? @db.Timestamp(0)
  updated_at       DateTime? @db.Timestamp(0)

  @@unique([city_id, name])
  @@index([city_id])
  @@index([name])
}



model location {
  id        Int      @id @default(autoincrement())
  name      String
  cityId    Int
  createdAt DateTime @default(now())
  city      city     @relation(fields: [cityId], references: [id], map: "Location_cityId_fkey")

  @@unique([name, cityId], map: "Location_name_cityId_key")
  @@index([cityId], map: "Location_cityId_fkey")
}

model locations {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  city_id    BigInt    @db.UnsignedBigInt
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model manager_verification_codes {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  manager_id BigInt
  otp        String
  expire_at  DateTime? @db.Timestamp(0)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model managers {
  id                BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name              String
  email             String    @unique(map: "managers_email_unique")
  email_verified_at DateTime? @db.Timestamp(0)
  remember_token    String?   @db.VarChar(100)
  created_at        DateTime? @db.Timestamp(0)
  updated_at        DateTime? @db.Timestamp(0)
}

model migrations {
  id        Int    @id @default(autoincrement()) @db.UnsignedInt
  migration String
  batch     Int
}

model model_has_permissions {
  permission_id BigInt      @db.UnsignedBigInt
  model_type    String
  model_id      BigInt      @db.UnsignedBigInt
  permissions   permissions @relation(fields: [permission_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "model_has_permissions_permission_id_foreign")

  @@id([permission_id, model_id, model_type])
  @@index([model_id, model_type], map: "model_has_permissions_model_id_model_type_index")
}

model model_has_roles {
  role_id    BigInt @db.UnsignedBigInt
  model_type String
  model_id   BigInt @db.UnsignedBigInt
  roles      roles  @relation(fields: [role_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "model_has_roles_role_id_foreign")

  @@id([role_id, model_id, model_type])
  @@index([model_id, model_type], map: "model_has_roles_model_id_model_type_index")
}

model newsletters {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  email      String
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model password_reset_tokens {
  email      String    @id
  token      String
  created_at DateTime? @db.Timestamp(0)
}

model permissions {
  id                    BigInt                  @id @default(autoincrement()) @db.UnsignedBigInt
  name                  String
  guard_name            String
  created_at            DateTime?               @db.Timestamp(0)
  updated_at            DateTime?               @db.Timestamp(0)
  model_has_permissions model_has_permissions[]
  role_has_permissions  role_has_permissions[]

  @@unique([name, guard_name], map: "permissions_name_guard_name_unique")
}

model role_has_permissions {
  permission_id BigInt      @db.UnsignedBigInt
  role_id       BigInt      @db.UnsignedBigInt
  permissions   permissions @relation(fields: [permission_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "role_has_permissions_permission_id_foreign")
  roles         roles       @relation(fields: [role_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "role_has_permissions_role_id_foreign")

  @@id([permission_id, role_id])
  @@index([role_id], map: "role_has_permissions_role_id_foreign")
}

model roles {
  id                   BigInt                 @id @default(autoincrement()) @db.UnsignedBigInt
  name                 String
  guard_name           String
  created_at           DateTime?              @db.Timestamp(0)
  updated_at           DateTime?              @db.Timestamp(0)
  model_has_roles      model_has_roles[]
  role_has_permissions role_has_permissions[]

  @@unique([name, guard_name], map: "roles_name_guard_name_unique")
}

model sessions {
  id            String  @id
  user_id       BigInt? @db.UnsignedBigInt
  ip_address    String? @db.VarChar(45)
  user_agent    String? @db.Text
  payload       String  @db.LongText
  last_activity Int

  @@index([last_activity], map: "sessions_last_activity_index")
  @@index([user_id], map: "sessions_user_id_index")
}

model settings {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name       String
  logo       String
  favicon    String
  mobile     String
  email      String
  address    String    @db.Text
  fb         String
  insta      String
  x          String
  linkedin   String
  youtube    String
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model task_reports {
  id              BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  task_id         BigInt    @db.UnsignedBigInt
  remark          String?   @db.Text
  status          Int       @default(0)
  assignedForDate DateTime  @db.Date
  created_at      DateTime? @db.Timestamp(0)
  updated_at      DateTime? @db.Timestamp(0)
  visit_status    Int       @default(0)
}

model tasks {
  id                 BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  manager_id         BigInt    @db.UnsignedBigInt
  banquet_inquiry_id BigInt    @db.UnsignedBigInt
  status             Int
  assignedForDate    DateTime  @db.Date
  created_at         DateTime? @db.Timestamp(0)
  updated_at         DateTime? @db.Timestamp(0)
  visit_status       Int       @default(0)
  is_contacted       Int       @default(0)
}

model users {
  id                BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  name              String
  email             String    @unique(map: "users_email_unique")
  email_verified_at DateTime? @db.Timestamp(0)
  password          String
  remember_token    String?   @db.VarChar(100)
  created_at        DateTime? @db.Timestamp(0)
  updated_at        DateTime? @db.Timestamp(0)
}

model venue_features {
  id          BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  title       String
  description String    @db.Text
  parent_id   BigInt
  listing_id  BigInt    @db.UnsignedBigInt
  created_at  DateTime? @db.Timestamp(0)
  updated_at  DateTime? @db.Timestamp(0)
}

model venue_images {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  image      String
  alt_text   String?
  listing_id BigInt    @db.UnsignedBigInt
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
  listing    listings  @relation(fields: [listing_id], references: [id])

  @@index([listing_id], map: "venue_images_listing_id_fkey")
}

model venue_policies {
  id          BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  title       String
  description String    @db.Text
  parent_id   BigInt
  listing_id  BigInt    @db.UnsignedBigInt
  created_at  DateTime? @db.Timestamp(0)
  updated_at  DateTime? @db.Timestamp(0)
}

model verification_codes {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  user_id    BigInt
  otp        String
  expire_at  DateTime? @db.Timestamp(0)
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model visit_reports {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  status     Int
  remark     String    @db.Text
  visit_id   BigInt    @db.UnsignedBigInt
  visit_date DateTime  @db.Date
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model visits {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  status     Int
  remark     String    @db.Text
  task_id    BigInt    @db.UnsignedBigInt
  visit_date DateTime  @db.Date
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model contactmessage {
  id        Int       @id @default(autoincrement())
  name      String    @db.VarChar(255)
  email     String    @db.VarChar(255)
  phone     String?   @db.VarChar(255)
  message   String    @db.Text
  createdAt DateTime? @default(now()) @db.DateTime(0)
}